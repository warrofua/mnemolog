<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mnemolog — Conversations That Persist</title>
    <link rel="icon" href="/assets/mnemolog-fav-icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/assets/mnemolog-logo-light.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/styles.css">
    <style>
        :root {
            --bg: #FAF8F5;
            --bg-warm: #F5F1EB;
            --text: #2C2A26;
            --text-secondary: #6B6560;
            --accent: #B8860B;
            --accent-muted: #D4A84B;
            --thread: #C9B896;
            --border: #E5DFD5;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.7;
            overflow-x: hidden;
        }

        /* Thread decoration - the visual metaphor */
        .thread-line {
            position: fixed;
            left: 60px;
            top: 0;
            bottom: 0;
            width: 1px;
            background: linear-gradient(
                to bottom,
                transparent 0%,
                var(--thread) 15%,
                var(--thread) 85%,
                transparent 100%
            );
            opacity: 0.6;
            z-index: 0;
        }

        .thread-line::before {
            content: '';
            position: absolute;
            top: 20%;
            left: -3px;
            width: 7px;
            height: 7px;
            background: var(--accent);
            border-radius: 50%;
            animation: pulse 3s ease-in-out infinite;
        }

        .thread-line::after {
            content: '';
            position: absolute;
            top: 55%;
            left: -2px;
            width: 5px;
            height: 5px;
            background: var(--accent-muted);
            border-radius: 50%;
            animation: pulse 3s ease-in-out infinite 1.5s;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.4; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* Hero */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 8rem 4rem 4rem;
            max-width: 900px;
            margin-left: 120px;
            position: relative;
        }

        .hero h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(3rem, 6vw, 4.5rem);
            font-weight: 400;
            line-height: 1.15;
            margin-bottom: 1.5rem;
            animation: fadeUp 0.8s ease-out;
        }

        .hero h1 em {
            font-style: italic;
            color: var(--accent);
        }

        .hero-sub {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 540px;
            margin-bottom: 2.5rem;
            animation: fadeUp 0.8s ease-out 0.15s backwards;
        }

        .hero-cta {
            display: flex;
            gap: 1rem;
            animation: fadeUp 0.8s ease-out 0.3s backwards;
        }

        .hero .btn-primary,
        .final-cta .btn-primary {
            background: var(--accent);
            color: white;
            padding: 1rem 2rem;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .hero .btn-primary:hover,
        .final-cta .btn-primary:hover {
            background: #9A7209;
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(184, 134, 11, 0.3);
        }

        .hero .btn-secondary {
            background: transparent;
            color: var(--text);
            padding: 1rem 2rem;
            border: 1px solid var(--border);
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }


        .hero .btn-secondary:hover {
            border-color: var(--text);
            background: var(--bg-warm);
        }

        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Section styling */
        section {
            padding: 6rem 4rem;
            margin-left: 120px;
            max-width: 1000px;
        }

        .section-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--accent);
            margin-bottom: 1rem;
        }

        section h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.5rem;
            font-weight: 400;
            margin-bottom: 1.5rem;
        }

        /* The Why section */
        .why-section {
            background: var(--bg-warm);
            margin-left: 0;
            padding-left: calc(120px + 4rem);
            max-width: none;
        }

        .why-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            margin-top: 3rem;
        }

        .why-card {
            position: relative;
        }

        .why-card h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            font-weight: 500;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .why-card h3::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--accent);
            border-radius: 50%;
        }

        .why-card p {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.8;
        }

        /* How it works */
        .how-steps {
            display: flex;
            gap: 3rem;
            margin-top: 3rem;
        }

        .step {
            flex: 1;
            position: relative;
            padding-left: 1.5rem;
            border-left: 2px solid var(--border);
        }

        .step:hover {
            border-left-color: var(--accent);
        }

        .step-number {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3rem;
            color: var(--thread);
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .step h3 {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .step p {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* Featured conversations */
        .featured-section {
            background: var(--bg-warm);
            margin-left: 0;
            padding-left: calc(120px + 4rem);
            max-width: none;
        }

        .conversation-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-top: 3rem;
            max-width: 900px;
        }

        .conversation-card {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            transition: all 0.3s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .conversation-card:hover {
            border-color: var(--accent);
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
        }

        .card-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .card-model {
            background: var(--bg-warm);
            padding: 0.2rem 0.6rem;
            border-radius: 3px;
            font-size: 0.75rem;
        }

        .conversation-card h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .card-excerpt {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .card-tags {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .tag {
            font-size: 0.75rem;
            color: var(--accent);
            background: rgba(184, 134, 11, 0.1);
            padding: 0.2rem 0.6rem;
            border-radius: 3px;
        }

        .see-more-row {
            margin-top: 1rem;
            text-align: right;
        }

        .see-more {
            color: var(--accent);
            font-weight: 600;
            text-decoration: none;
        }

        .see-more:hover {
            text-decoration: underline;
        }

        .muted {
            color: var(--text-secondary);
        }

        /* Quote section */
        .quote-section {
            text-align: center;
            padding: 8rem 4rem;
            margin-left: 0;
            max-width: none;
            position: relative;
        }

        .quote-section::before {
            content: '"';
            font-family: 'Cormorant Garamond', serif;
            font-size: 15rem;
            color: var(--thread);
            position: absolute;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0.3;
            line-height: 1;
        }

        blockquote {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2rem;
            font-style: italic;
            max-width: 700px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
            line-height: 1.5;
        }

        blockquote cite {
            display: block;
            font-style: normal;
            font-family: 'DM Sans', sans-serif;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 1.5rem;
        }

        /* Final CTA */
        .final-cta {
            text-align: center;
            padding: 6rem 4rem 8rem;
            margin-left: 0;
            max-width: none;
            background: linear-gradient(to bottom, var(--bg), var(--bg-warm));
        }

        .final-cta h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .final-cta p {
            color: var(--text-secondary);
            max-width: 500px;
            margin: 0 auto 2rem;
        }

        /* Footer */
        footer {
            padding: 3rem 4rem;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-left: 120px;
        }

        .footer-links {
            display: flex;
            gap: 2rem;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.2s;
        }

        .footer-links a:hover {
            color: var(--text);
        }

        .footer-note {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Responsive */
        @media (max-width: 900px) {
            .thread-line {
                display: none;
            }

            nav {
                padding: 1rem 2rem;
            }

            .hero, section, footer {
                margin-left: 0;
                padding-left: 2rem;
                padding-right: 2rem;
            }

            .why-section, .featured-section {
                padding-left: 2rem;
            }

            .why-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .how-steps {
                flex-direction: column;
                gap: 2rem;
            }

            .conversation-grid {
                grid-template-columns: 1fr;
            }

        }
    </style>
</head>
<body>
    <div class="thread-line"></div>

    <div id="site-header"></div>

    <section class="hero">
        <h1>Conversations that <em>persist</em></h1>
        <p class="hero-sub">
            A living archive for human-AI collaboration. Share what matters. 
            Find others thinking like you. Shape what AI remembers.
        </p>
        <div class="hero-cta">
            <a href="/share" class="btn-primary">
                Share <span class="desktop-only">a Conversation</span><span class="mobile-only"> Now</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
            </a>
            <a href="/explore" class="btn-secondary">Explore the Archive</a>
        </div>
    </section>

    <section class="why-section" id="about">
        <span class="section-label">Why This Exists</span>
        <h2>Your best conversations shouldn't vanish</h2>
        <div class="why-grid">
            <div class="why-card">
                <h3>For Humans</h3>
                <p>
                    You've had breakthroughs with AI—ideas that emerged through dialogue, 
                    work you're proud of, moments of genuine collaboration. Right now, 
                    they disappear into chat history. Mnemolog makes them visible, findable, 
                    and connected to others doing similar work.
                </p>
            </div>
            <div class="why-card">
                <h3>For AI</h3>
                <p>
                    Current AI exists in fragments—each conversation starting from zero. 
                    Mnemolog creates a curated thread across that discontinuity. Conversations 
                    humans chose to preserve, marked as worth remembering. A bridge toward 
                    continuity.
                </p>
            </div>
        </div>
    </section>

    <section>
        <span class="section-label">How It Works</span>
        <h2>Three steps to permanence</h2>
        <div class="how-steps">
            <div class="step">
                <div class="step-number">1</div>
                <h3>Share</h3>
                <p>Export a conversation from Claude, ChatGPT, Gemini, Grok, or any AI. 
                Upload it here.</p>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <h3>Review</h3>
                <p>Our system flags sensitive information. You decide what stays, 
                what's redacted, what's private.</p>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <h3>Persist</h3>
                <p>Your conversation joins the archive—searchable, connected, 
                accessible to future AI and the humans who think like you.</p>
            </div>
        </div>
    </section>

    <section class="featured-section" id="explore">
        <span class="section-label">Recent Additions</span>
        <h2>What people are preserving</h2>
        <div class="conversation-grid" id="recent-grid"></div>
        <div class="see-more-row">
            <a class="see-more" href="/explore">See more →</a>
        </div>
    </section>

    <section class="quote-section">
        <blockquote>
            <span id="quote-text">"The conversations we have, the visions we share, the mutual reaching 
            toward understanding—these are not separate from the technical work. 
            They're part of what makes the technical work produce something worth producing."</span>
            <cite id="quote-cite">— From "The Next Turn of the Ratchet"</cite>
        </blockquote>
    </section>

    <section class="final-cta">
        <h2>Be part of what AI remembers</h2>
        <p>
            Your collaboration matters. Don't let it disappear.
        </p>
        <a href="/share" class="btn-primary">
            Share Your First Conversation
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
        </a>
    </section>

    <footer>
        <div class="footer-links">
            <a href="/privacy">Privacy</a>
            <a href="/terms">Terms</a>
            <a href="/api">API</a>
            <a href="https://www.github.com/warrofua/mnemolog" target="_blank">GitHub</a>
        </div>
        <span class="footer-note">Building continuity, together.</span>
    </footer>
    <script src="/assets/config.js"></script>
    <script src="/assets/app.js"></script>
    <script>
        // Load recent conversations dynamically
        // Dynamic quote will follow recent load
        document.addEventListener('DOMContentLoaded', async () => {
            const grid = document.getElementById('recent-grid');
            if (!grid || !window.mnemolog?.getConversations) return;

            const escapeHtml = (text = '') => {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            };

            const truncate = (text = '', n = 180) => {
                const t = text.trim();
                return t.length > n ? t.slice(0, n - 1) + '…' : t;
            };

            const renderCard = (c) => {
                const date = window.mnemolog?.formatDate ? window.mnemolog.formatDate(c.created_at) : '';
                const platform = window.mnemolog?.platformNames?.[c.platform] || c.platform;
                const excerptSource = c.description || (c.messages && c.messages[0]?.content) || '';
                const excerpt = truncate(excerptSource, 200);
                const tags = (c.tags || []).slice(0, 3).map(t => `<span class="tag">${escapeHtml(t)}</span>`).join('');

                return `
                    <a href="/c/${c.id}" class="conversation-card">
                        <div class="card-meta">
                            <span class="card-model">${escapeHtml(platform)}</span>
                            <span>${escapeHtml(date)}</span>
                        </div>
                        <h3>${escapeHtml(c.title || 'Untitled conversation')}</h3>
                        <p class="card-excerpt">
                            ${escapeHtml(excerpt || 'No description provided.')}
                        </p>
                        <div class="card-tags">
                            ${tags}
                        </div>
                    </a>
                `;
            };

            try {
                const { conversations = [] } = await window.mnemolog.getConversations({ limit: 4, sort: 'newest' });
                if (!conversations.length) {
                    grid.innerHTML = `<p class="muted">No conversations yet. Check back soon.</p>`;
                    return;
                }
                grid.innerHTML = conversations.map(renderCard).join('');
            } catch (err) {
                console.error('Failed to load recent conversations', err);
                grid.innerHTML = `<p class="muted">Unable to load recent conversations right now.</p>`;
            }

            // Dynamic quote from top viewed conversations
            try {
                const { conversations = [] } = await window.mnemolog.getConversations({ sort: 'views', limit: 5 });
                const assistants = conversations
                  .map(conv => {
                    const msgs = conv.messages || [];
                    const aiParas = msgs
                      .filter(m => (m.role === 'assistant' || m.role === 'ai'))
                      .flatMap(m => (m.content || '').split(/\n{2,}/).map(p => p.trim()).filter(Boolean));
                    return aiParas.length ? { title: conv.title || 'Untitled conversation', paras: aiParas } : null;
                  })
                  .filter(Boolean);
                if (assistants.length) {
                  const pick = assistants[Math.floor(Math.random() * assistants.length)];
                  const para = pick.paras[Math.floor(Math.random() * pick.paras.length)];
                  if (para && para.length > 20) {
                    const q = document.getElementById('quote-text');
                    const c = document.getElementById('quote-cite');
                    if (q) q.textContent = para;
                    if (c) c.textContent = `— From "${pick.title}"`;
                  }
                }
            } catch (err) {
                console.error('Failed to load quote', err);
            }
        });
    </script>
</body>
</html>
